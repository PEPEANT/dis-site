<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>DICE CITY V11 (Safe Restore)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* ê¸°ë³¸ ì„¤ì • */
        body { font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, Roboto, sans-serif; background-color: #f1f5f9; touch-action: manipulation; -webkit-tap-highlight-color: transparent; padding-bottom: 110px; user-select: none; }
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        /* ì• ë‹ˆë©”ì´ì…˜ */
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.2s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
        
        /* ë‰´ìŠ¤ í‹°ì»¤ */
        .marquee-container { overflow: hidden; white-space: nowrap; position: relative; mask-image: linear-gradient(to right, transparent, black 10%, black 90%, transparent); }
        .marquee-content { display: inline-block; padding-left: 100%; animation: marquee 30s linear infinite; }
        @keyframes marquee { 0% { transform: translateX(0); } 100% { transform: translateX(-100%); } }
        
        /* ê¸°íƒ€ íš¨ê³¼ */
        .click-effect { position: absolute; animation: floatUp 1s forwards; pointer-events: none; font-weight: bold; color: #10b981; z-index: 100; }
        @keyframes floatUp { 0% { opacity: 1; transform: translateY(0); } 100% { opacity: 0; transform: translateY(-30px); } }
        .modal-backdrop { background-color: rgba(0, 0, 0, 0.6); backdrop-filter: blur(4px); }
        .main-bg { background: radial-gradient(circle at center, #1e293b 0%, #0f172a 100%); }
        
        /* AI ë¡œë”© íš¨ê³¼ */
        .ai-loading { animation: pulse-glow 1.5s infinite; }
        @keyframes pulse-glow { 0% { opacity: 0.6; } 50% { opacity: 1; } 100% { opacity: 0.6; } }

        /* í…ìŠ¤íŠ¸ ì„ íƒ í—ˆìš© (ì €ì¥ ì½”ë“œìš©) */
        .allow-select { user-select: text !important; -webkit-user-select: text !important; }
    </style>
</head>
<body class="text-gray-800 h-screen overflow-hidden">

    <!-- ì˜¤ë””ì˜¤ ìš”ì†Œ -->
    <audio id="bgm-player" loop>
        <source src="https://cdn.pixabay.com/download/audio/2022/05/27/audio_1808fbf07a.mp3?filename=lofi-study-112191.mp3" type="audio/mp3">
    </audio>

    <!-- 1. ë©”ì¸ ì‹œì‘ í™”ë©´ -->
    <div id="main-screen" class="fixed inset-0 z-[100] main-bg flex flex-col items-center justify-center text-white p-6 transition-opacity duration-500">
        <div class="text-center space-y-6 animate-[fadeIn_0.5s_ease-out]">
            <div class="space-y-2">
                <span class="inline-block px-3 py-1 rounded-full bg-green-500/20 text-green-300 text-xs font-bold border border-green-500/50">Safe Mode âœ…</span>
                <h1 class="text-5xl font-black tracking-tighter bg-gradient-to-br from-white to-gray-400 bg-clip-text text-transparent drop-shadow-xl">DICE CITY<br><span class="text-2xl text-indigo-400">V11</span></h1>
            </div>
            
            <p class="text-gray-400 text-sm max-w-xs mx-auto leading-relaxed">
                ë‹¤ì´ìŠ¤ì‹œí‹°ì— ì˜¤ì‹ ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤<br>
            </p>

            <div class="flex flex-col gap-3 w-full max-w-[240px] mx-auto pt-4">
                <button onclick="startGame()" class="w-full py-4 bg-indigo-600 hover:bg-indigo-500 text-white font-bold rounded-xl shadow-lg shadow-indigo-900/50 active:scale-95 transition text-lg">
                    GAME START
                </button>
                <button onclick="openLoadGameModal()" class="w-full py-3 bg-slate-700 hover:bg-slate-600 text-gray-300 font-bold rounded-xl shadow-lg active:scale-95 transition text-sm">
                    ğŸ“‚ í˜„ê¸ˆ ë°ì´í„° ë³µêµ¬
                </button>
            </div>
        </div>
        <div class="absolute bottom-6 text-xs text-gray-600">ver 11.0.0 | Cash Only Restore</div>
    </div>

    <!-- 3. ê²Œì„ í™”ë©´ -->
    <div id="game-screen" class="hidden h-full overflow-y-auto hide-scrollbar">
        
        <!-- ìƒë‹¨ ì •ë³´ë°” -->
        <header class="sticky top-0 z-50 bg-white/90 backdrop-blur shadow-sm border-b border-gray-200 px-4 py-3">
            <div class="max-w-3xl mx-auto">
                <div class="flex justify-between items-center mb-2">
                    <div class="flex items-center gap-2">
                        <button onclick="toggleBGM()" id="bgm-btn" class="w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center text-gray-400 hover:bg-gray-200 transition">
                            ğŸ”‡
                        </button>
                        <span class="text-xl transition-all duration-300" id="header-logo">ğŸ¥£</span>
                        <div>
                            <div id="player-rank" class="text-xs font-bold text-indigo-600 bg-indigo-50 px-2 py-0.5 rounded-full inline-block">ë…¸ìˆ™ì</div>
                            <h1 class="font-black text-gray-800 leading-none">DICE CITY</h1>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="text-[10px] text-gray-500">ì´ ìì‚°</div>
                        <div id="header-total-asset" class="text-lg font-black text-gray-900">0ì›</div>
                    </div>
                </div>
                <!-- í˜„ê¸ˆ ë°” -->
                <div class="bg-gray-100 rounded-full h-6 flex items-center px-3 relative overflow-hidden">
                    <div class="text-[10px] text-gray-500 mr-2">í˜„ê¸ˆ</div>
                    <div id="header-cash" class="font-bold text-sm text-green-700">0ì›</div>
                </div>
            </div>
        </header>

        <main class="max-w-3xl mx-auto p-4 space-y-5 pb-24">

            <!-- 1. ë‚´ ì •ë³´ íƒ­ -->
            <div id="tab-myinfo" class="tab-content active space-y-5">
                <!-- ê¸´ê¸‰ ì•Œë°” -->
                <div id="emergency-job"
                     class="hidden bg-white p-4 rounded-2xl border border-indigo-100 shadow-sm active:scale-[0.99] transition-transform select-none"
                     onclick="doPartTimeJob(event)">
                  <h3 class="font-bold text-indigo-700 text-lg pointer-events-none">ğŸ’¸ ê¸´ê¸‰ ì•Œë°”í•˜ê¸°</h3>
                  <p class="text-xs text-gray-500 pointer-events-none">í„°ì¹˜í•˜ì—¬ ì‹œë“œë¨¸ë‹ˆ ëª¨ìœ¼ê¸° (+135,000ì›)</p>
                </div>

                <div class="bg-white rounded-3xl shadow-lg overflow-hidden border border-gray-100">
                    <div class="bg-gradient-to-r from-indigo-600 to-blue-600 p-6 text-white">
                        <div class="flex items-center gap-4">
                            <div class="w-16 h-16 bg-white/20 rounded-full flex items-center justify-center text-3xl border-2 border-white/30 transition-all duration-300" id="my-avatar">ğŸ¥£</div>
                            <div>
                                <div class="text-xs text-indigo-200 font-bold uppercase tracking-wider">Identity</div>
                                <h2 class="text-2xl font-black">í”Œë ˆì´ì–´</h2>
                                <div class="flex items-center gap-2 mt-1">
                                    <span id="my-rank-badge" class="px-2 py-0.5 bg-white/20 rounded text-xs font-bold backdrop-blur-sm">ë…¸ìˆ™ì</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="p-6">
                        <div class="flex justify-between items-center mb-6">
                            <div>
                                <div class="text-xs text-gray-400 font-bold">Relationship</div>
                                <div class="text-xl font-black text-gray-800" id="relationship-status">ëª¨íƒœì†”ë¡œ</div>
                            </div>
                            <div class="text-right">
                                <div class="text-xs text-gray-400 font-bold">Net Worth</div>
                                <div id="my-networth" class="text-xl font-black text-indigo-600">0ì›</div>
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-3 mb-6">
                            <button onclick="goForWalk()" class="py-4 bg-pink-50 hover:bg-pink-100 text-pink-600 rounded-2xl font-bold transition border border-pink-100 flex flex-col items-center justify-center gap-1 group">
                                <span class="text-2xl group-hover:scale-110 transition">ğŸŒ¸</span>
                                <span>í—ŒíŒ…í•˜ê¸°</span>
                            </button>
                            <button onclick="goHome()" class="py-4 bg-green-50 hover:bg-green-100 text-green-600 rounded-2xl font-bold transition border border-green-100 flex flex-col items-center justify-center gap-1 group">
                                <span class="text-2xl group-hover:scale-110 transition">ğŸ </span>
                                <span>ì§‘ì— ê°€ê¸°</span>
                            </button>
                        </div>
                        <div class="space-y-2 text-sm bg-gray-50 p-4 rounded-xl mb-4">
                            <div class="flex justify-between"><span class="text-gray-500">í˜„ê¸ˆ</span><span id="info-cash" class="font-bold">0ì›</span></div>
                            <div class="flex justify-between"><span class="text-gray-500">ì£¼ì‹/ì½”ì¸</span><span id="info-invest" class="font-bold">0ì›</span></div>
                            <div class="flex justify-between"><span class="text-gray-500">ë¶€ë™ì‚°/ëª…í’ˆ</span><span id="info-asset" class="font-bold">0ì›</span></div>
                        </div>

                        <!-- V11 ë°ì´í„° ë°±ì—… ì„¼í„° -->
                        <div class="bg-slate-800 rounded-xl p-4 text-white">
                            <h3 class="text-sm font-bold mb-1 flex items-center gap-2">ğŸ’¾ ë°ì´í„° ë°±ì—… ì„¼í„° <span class="text-[10px] font-normal text-green-400 bg-green-900/50 px-1.5 py-0.5 rounded border border-green-800">ì•ˆì „ ëª¨ë“œ</span></h3>
                            <p class="text-xs text-slate-400 mb-3">ì˜¤ë¥˜ ë°©ì§€ë¥¼ ìœ„í•´ í˜„ê¸ˆ(Cash) ë°ì´í„°ë§Œ ì €ì¥/ë³µêµ¬í•©ë‹ˆë‹¤.</p>
                            <div class="grid grid-cols-2 gap-2">
                                <button onclick="exportSaveData()" class="bg-blue-500 hover:bg-blue-600 text-white text-xs py-2.5 rounded-lg font-bold active:scale-95 transition shadow-md">
                                    ğŸ“¤ ì €ì¥ ì½”ë“œ ë³µì‚¬
                                </button>
                                <button onclick="openLoadGameModal()" class="bg-slate-600 hover:bg-slate-500 text-white text-xs py-2.5 rounded-lg font-bold active:scale-95 transition shadow-md border border-slate-500">
                                    ğŸ“¥ í˜„ê¸ˆ ë³µêµ¬
                                </button>
                            </div>
                        </div>

                    </div>
                </div>

                <div class="bg-white p-5 rounded-2xl shadow-sm border border-gray-100">
                    <h3 class="font-bold text-gray-800 mb-3 text-sm flex items-center gap-2">
                        <span>ğŸ’• ì¸ì—° ëª©ë¡</span>
                        <span class="text-xs text-gray-400 font-normal">100% ë‹¬ì„± ì‹œ ì—°ì¸ ë“±ê·¹</span>
                    </h3>
                    <div id="partner-list" class="space-y-2"></div>
                </div>
            </div>

            <!-- 2. ë‰´ìŠ¤ íƒ­ -->
            <div id="tab-news" class="tab-content space-y-4">
                <div class="bg-slate-900 text-white p-6 rounded-2xl shadow-lg flex justify-between items-center">
                    <div>
                        <h2 class="text-xl font-bold">ğŸ“¡ Global News</h2>
                        <p class="text-xs text-slate-400 mt-1">ì‹œì¥ ì‚¬ì´í´ì„ íŒŒì•…í•˜ì„¸ìš”.</p>
                    </div>
                    <button onclick="generateAINews()" id="btn-ai-news" class="bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-500 hover:to-indigo-500 text-white text-xs font-bold px-4 py-2 rounded-xl shadow-lg active:scale-95 transition flex items-center gap-1">
                        <span>âœ¨ AI íŠ¹íŒŒì›</span>
                    </button>
                </div>
                <div id="news-locked" class="hidden flex flex-col items-center justify-center bg-gray-200 h-64 rounded-2xl border-2 border-dashed border-gray-400">
                    <div class="text-5xl mb-3 grayscale">ğŸ“µ</div>
                    <h3 class="font-bold text-gray-600">ì ‘ê·¼ ë¶ˆê°€</h3>
                    <p class="text-sm text-gray-500">íœ´ëŒ€í°ì„ êµ¬ë§¤í•˜ì„¸ìš”.</p>
                </div>
                <div id="news-list-container" class="space-y-3"></div>
            </div>

            <!-- 3. ì£¼ì‹ íƒ­ -->
            <div id="tab-stock" class="tab-content space-y-5">
                <div id="stock-ticker-area" class="bg-white rounded-lg h-10 flex items-center overflow-hidden shadow-sm border"></div>
                <section class="bg-white p-5 rounded-2xl shadow-sm border border-gray-200">
                    <div class="flex justify-between items-end mb-4">
                        <div>
                            <div class="text-[10px] text-gray-400 font-bold uppercase">Market Cycle</div>
                            <div id="market-cycle" class="text-2xl font-black transition-colors duration-500">Neutral</div>
                        </div>
                        <div class="text-right">
                            <div class="text-[10px] text-gray-400 font-bold uppercase">NASDAQ</div>
                            <div id="nasdaq-price" class="text-xl font-mono font-bold">0</div>
                        </div>
                    </div>
                    <div class="h-32 flex items-end gap-1" id="nasdaq-chart"></div>
                </section>
                <section class="bg-white rounded-2xl shadow-sm border overflow-hidden">
                    <div class="bg-gray-50 px-5 py-3 border-b font-bold text-sm">ğŸ“ í¬íŠ¸í´ë¦¬ì˜¤</div>
                    <div id="my-portfolio-list" class="p-2 space-y-1"></div>
                </section>
                <section class="bg-white rounded-2xl shadow-sm border overflow-hidden">
                    <div class="px-5 py-3 border-b bg-indigo-50/50 font-bold text-sm text-indigo-800">ğŸ“‰ ê±°ë˜ì†Œ</div>
                    <table class="w-full text-sm"><tbody id="stock-list" class="divide-y divide-gray-100"></tbody></table>
                </section>
            </div>

            <!-- 4. ì„ ë¬¼ íƒ­ -->
            <div id="tab-futures" class="tab-content space-y-5">
                <div id="futures-ticker-area" class="bg-slate-900 text-white rounded-lg h-10 flex items-center overflow-hidden"></div>
                <div class="bg-white p-5 rounded-2xl border shadow-sm space-y-4">
                    <div class="flex bg-gray-100 p-1 rounded-xl">
                        <button onclick="selectCrypto('BTC')" id="btn-btc" class="flex-1 py-2 rounded-lg font-bold text-sm">BTC</button>
                        <button onclick="selectCrypto('ETH')" id="btn-eth" class="flex-1 py-2 rounded-lg font-bold text-sm">ETH</button>
                    </div>
                    <div class="text-center py-2">
                        <div id="crypto-price-display" class="text-2xl font-mono font-black text-gray-800">0.00</div>
                    </div>
                    <div>
                        <div class="flex justify-between text-xs mb-2 font-bold text-gray-600">
                            <span>ë ˆë²„ë¦¬ì§€ <span id="leverage-val" class="text-indigo-600">x1</span></span>
                        </div>
                        <input type="range" min="1" max="50" value="1" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-indigo-600" id="leverage-slider" oninput="updateLeverageUI(this.value)">
                    </div>
                    <div class="space-y-2">
                        <label class="text-xs text-gray-500 font-bold ml-1">ì¦ê±°ê¸ˆ ì„¤ì •</label>
                        <input type="number" id="futures-margin" class="w-full border-b-2 border-gray-200 text-center text-xl font-bold text-gray-800 focus:border-indigo-500 outline-none py-2" placeholder="0">
                        <div class="grid grid-cols-4 gap-2">
                            <button onclick="setFuturesMarginPercent(0.1)" class="text-xs bg-gray-100 hover:bg-gray-200 py-2 rounded-lg font-bold text-gray-600">10%</button>
                            <button onclick="setFuturesMarginPercent(0.25)" class="text-xs bg-gray-100 hover:bg-gray-200 py-2 rounded-lg font-bold text-gray-600">25%</button>
                            <button onclick="setFuturesMarginPercent(0.5)" class="text-xs bg-gray-100 hover:bg-gray-200 py-2 rounded-lg font-bold text-gray-600">50%</button>
                            <button onclick="setFuturesMarginPercent(1.0)" class="text-xs bg-indigo-100 text-indigo-600 hover:bg-indigo-200 py-2 rounded-lg font-bold">MAX</button>
                        </div>
                    </div>
                    <div class="flex gap-3 pt-2">
                        <button onclick="openPosition('long')" class="flex-1 bg-green-500 hover:bg-green-600 text-white py-3 rounded-xl font-bold shadow-md active:scale-95 transition">LONG</button>
                        <button onclick="openPosition('short')" class="flex-1 bg-red-500 hover:bg-red-600 text-white py-3 rounded-xl font-bold shadow-md active:scale-95 transition">SHORT</button>
                    </div>
                </div>
                <div class="bg-white rounded-2xl border overflow-hidden">
                    <div class="bg-gray-50 px-5 py-3 border-b text-xs font-bold text-gray-500 uppercase">Positions</div>
                    <div id="futures-positions" class="divide-y divide-gray-100"></div>
                </div>
            </div>

            <!-- 5. ìì‚° íƒ­ (ë¶€ë™ì‚°) -->
            <div id="tab-realestate" class="tab-content space-y-5">
                <div class="bg-gradient-to-r from-emerald-500 to-teal-600 text-white p-6 rounded-2xl shadow-lg flex justify-between items-center">
                    <div><h2 class="font-bold text-xl">Real Estate</h2><p class="text-xs text-emerald-100 mt-1">ì›”ì„¸ ìˆ˜ìµ ìì‚°</p></div>
                    <div class="text-right"><div class="text-xs text-emerald-100">ì›”ì„¸ (10ì´ˆ)</div><div id="total-rent" class="text-2xl font-black">+0ì›</div></div>
                </div>
                <div id="realestate-list" class="grid grid-cols-1 gap-4"></div>
            </div>

            <!-- 6. ì¹´ì§€ë…¸ íƒ­ -->
            <div id="tab-casino" class="tab-content space-y-5">
                <div class="bg-gradient-to-br from-slate-800 to-slate-900 text-white p-6 rounded-2xl shadow-lg border border-slate-700">
                    <div class="flex justify-between items-center mb-4">
                        <div class="text-xs text-gray-400">ë‚´ ë³´ìœ  ìì‚°</div>
                        <div id="casino-my-cash" class="text-xl font-bold text-emerald-400">0ì›</div>
                    </div>
                    <div class="h-px bg-slate-700 my-2"></div>
                    <div class="flex justify-between items-center mt-2">
                        <div class="text-xs text-indigo-300 font-bold uppercase tracking-wider">BETTING CHIP</div>
                        <div class="flex items-center gap-2">
                            <span class="text-2xl">ğŸª™</span>
                            <span id="casino-bet-display" class="text-3xl font-black text-yellow-400">0</span>
                        </div>
                    </div>
                </div>
                <div class="bg-white p-5 rounded-2xl border shadow-sm space-y-4">
                    <div>
                        <input type="number" id="bet-amount" class="w-full border-b-2 border-gray-200 text-center text-2xl font-bold py-2" placeholder="ë°°íŒ…ê¸ˆ ì„¤ì •" oninput="updateCasinoBetDisplay(this.value)">
                        <div class="grid grid-cols-4 gap-2 mt-2">
                            <button onclick="setBetPercent(0.1)" class="bg-gray-50 py-2 rounded text-xs font-bold">10%</button>
                            <button onclick="setBetPercent(0.25)" class="bg-gray-50 py-2 rounded text-xs font-bold">25%</button>
                            <button onclick="setBetPercent(0.5)" class="bg-gray-50 py-2 rounded text-xs font-bold">50%</button>
                            <button onclick="setBetPercent(1.0)" class="bg-indigo-50 text-indigo-600 py-2 rounded text-xs font-bold">ALL</button>
                        </div>
                    </div>
                </div>
                <div class="flex p-1 bg-gray-200 rounded-xl">
                    <button onclick="setCasinoGame('oddeven')" id="btn-game-oddeven" class="flex-1 py-2 rounded-lg text-sm font-bold transition-all bg-white shadow-sm">í™€ì§ (ì¸ìƒ í•œë°©)</button>
                    <button onclick="setCasinoGame('blackjack')" id="btn-game-blackjack" class="flex-1 py-2 rounded-lg text-sm font-bold text-gray-500 transition-all">ë¸”ë™ì­ (ìŠ¹ë¶€ì‚¬)</button>
                </div>
                
                <div id="game-oddeven" class="bg-white p-6 rounded-2xl border text-center shadow-sm min-h-[300px] flex flex-col justify-center">
                    <div id="oddeven-status" class="h-12 mb-4 font-bold text-gray-400 text-lg flex items-center justify-center">
                        ì„ íƒí•˜ì„¸ìš”
                    </div>
                    <div class="flex gap-4 justify-center mb-6">
                        <button id="btn-odd" onclick="playOddEven('odd')" class="w-28 h-28 rounded-full bg-indigo-500 hover:bg-indigo-600 active:scale-95 text-white font-bold text-2xl shadow-lg transition-all flex flex-col items-center justify-center gap-1">
                            <span>í™€</span><span class="text-xs font-normal opacity-70">Odd</span>
                        </button>
                        <button id="btn-even" onclick="playOddEven('even')" class="w-28 h-28 rounded-full bg-pink-500 hover:bg-pink-600 active:scale-95 text-white font-bold text-2xl shadow-lg transition-all flex flex-col items-center justify-center gap-1">
                            <span>ì§</span><span class="text-xs font-normal opacity-70">Even</span>
                        </button>
                    </div>
                    <p class="text-xs text-gray-400">ì—°ì† ì„±ê³µ ì‹œ ë°°ìœ¨: 2ë°° â” 5ë°° â” 12ë°°</p>
                </div>

                <div id="game-blackjack" class="hidden bg-[#2F5233] p-6 rounded-2xl border-4 border-[#4a3b22] relative shadow-2xl min-h-[360px] text-white flex flex-col justify-between">
                     <div class="text-center">
                        <div class="inline-block bg-black/30 px-3 py-1 rounded-full text-xs text-green-200 mb-2 border border-white/10">ë”œëŸ¬ (Dealer)</div>
                        <div id="bj-dealer-cards" class="flex justify-center h-16 items-center text-3xl gap-2 drop-shadow-md min-h-[64px]"></div>
                        <div id="bj-dealer-score" class="text-sm font-bold text-yellow-400 min-h-[20px] mt-1 opacity-0 transition-opacity duration-500">0</div>
                    </div>
                    <div class="text-center my-4"><div class="text-xs text-gray-400 tracking-widest">VS</div></div>
                    <div class="text-center">
                         <div id="bj-player-score" class="text-sm font-bold text-yellow-400 min-h-[20px] mb-1">0</div>
                        <div id="bj-player-cards" class="flex justify-center h-16 items-center text-3xl gap-2 drop-shadow-md min-h-[64px]"></div>
                         <div class="inline-block bg-black/30 px-3 py-1 rounded-full text-xs text-green-200 mt-2 border border-white/10">ë‚˜ (Player)</div>
                    </div>
                    <div class="grid grid-cols-2 gap-3 mt-6">
                        <button onclick="startBlackjack()" id="btn-bj-deal" class="col-span-2 bg-yellow-500 hover:bg-yellow-400 text-black font-black py-4 rounded-xl shadow-lg text-lg active:scale-95 transition">ê²Œì„ ì‹œì‘ (DEAL)</button>
                        <button onclick="hitBlackjack()" id="btn-bj-hit" class="hidden bg-blue-600 hover:bg-blue-500 py-4 rounded-xl font-bold shadow-lg border-b-4 border-blue-800 active:border-0 active:translate-y-1 transition text-lg">ì¹´ë“œ ë°›ê¸°</button>
                        <button onclick="standBlackjack()" id="btn-bj-stand" class="hidden bg-red-600 hover:bg-red-500 py-4 rounded-xl font-bold shadow-lg border-b-4 border-red-800 active:border-0 active:translate-y-1 transition text-lg">ë©ˆì¶”ê¸°</button>
                    </div>
                    <div id="bj-result" class="hidden absolute inset-0 bg-black/80 backdrop-blur-sm flex flex-col items-center justify-center z-20 rounded-xl animate-[fadeIn_0.2s]">
                         <div id="bj-result-emoji" class="text-6xl mb-4 animate-bounce">ğŸ‰</div>
                         <div id="bj-result-text" class="text-4xl font-black mb-6 text-white drop-shadow-[0_0_10px_rgba(255,255,255,0.5)]">WIN</div>
                         <button onclick="resetBlackjackUI()" class="bg-white hover:bg-gray-100 text-black px-8 py-3 rounded-full font-bold shadow-lg active:scale-95 transition">í•œ íŒ ë”!</button>
                    </div>
                </div>
            </div>

            <!-- 7. ìƒì  íƒ­ -->
            <div id="tab-shop" class="tab-content space-y-5">
                <div>
                    <h3 class="text-xs font-bold text-gray-500 uppercase mb-2 ml-1">Essential Items (í•„ìˆ˜ / 1íšŒ êµ¬ë§¤)</h3>
                    <div id="shop-essential-list" class="grid grid-cols-1 gap-3"></div>
                </div>
                <div>
                    <h3 class="text-xs font-bold text-gray-500 uppercase mb-2 ml-1">Luxury Assets (ëª…í’ˆ / ê°€ì¹˜ ë³´ì¡´)</h3>
                    <div id="shop-asset-list" class="grid grid-cols-1 gap-3"></div>
                </div>
            </div>
        </main>

        <!-- í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ -->
        <nav class="fixed bottom-0 w-full bg-white border-t border-gray-200 pb-safe z-50 overflow-x-auto hide-scrollbar">
            <div class="flex min-w-full px-1">
                <button onclick="switchTab('myinfo')" class="nav-item flex-1 min-w-[60px] py-2 text-center text-indigo-600 bg-indigo-50/50 font-bold rounded-lg mt-1" id="nav-myinfo">ğŸ‘¤<br><span class="text-[10px]">ë‚´ì •ë³´</span></button>
                <button onclick="switchTab('news')" class="nav-item flex-1 min-w-[60px] py-2 text-center text-gray-400 rounded-lg mt-1" id="nav-news">ğŸ“°<br><span class="text-[10px]">ë‰´ìŠ¤</span></button>
                <button onclick="switchTab('stock')" class="nav-item flex-1 min-w-[60px] py-2 text-center text-gray-400 rounded-lg mt-1" id="nav-stock">ğŸ“ˆ<br><span class="text-[10px]">ì£¼ì‹</span></button>
                <button onclick="switchTab('futures')" class="nav-item flex-1 min-w-[60px] py-2 text-center text-gray-400 rounded-lg mt-1" id="nav-futures">âš¡<br><span class="text-[10px]">ì„ ë¬¼</span></button>
                <button onclick="switchTab('realestate')" class="nav-item flex-1 min-w-[60px] py-2 text-center text-gray-400 rounded-lg mt-1" id="nav-realestate">ğŸ¢<br><span class="text-[10px]">ë¶€ë™ì‚°</span></button>
                <button onclick="switchTab('casino')" class="nav-item flex-1 min-w-[60px] py-2 text-center text-gray-400 rounded-lg mt-1" id="nav-casino">ğŸ°<br><span class="text-[10px]">ë„ë°•</span></button>
                <button onclick="switchTab('shop')" class="nav-item flex-1 min-w-[60px] py-2 text-center text-gray-400 rounded-lg mt-1" id="nav-shop">ğŸ›ï¸<br><span class="text-[10px]">ìƒì </span></button>
            </div>
        </nav>
    </div>

    <!-- ëª¨ë‹¬ë“¤ -->
    <div id="trade-modal" class="fixed inset-0 modal-backdrop hidden z-[70] flex items-center justify-center p-4">
        <div class="bg-white w-full max-w-sm rounded-2xl shadow-2xl p-5">
            <h3 id="modal-title" class="font-bold text-lg mb-2">ë§¤ë§¤</h3>
            <div class="flex items-center justify-center gap-2 mb-4">
                <button onclick="adjustQty(-1)" class="w-10 h-10 border rounded-full">-</button>
                <input type="number" id="input-qty" class="w-20 text-center border-b-2 text-xl font-bold" value="1">
                <button onclick="adjustQty(1)" class="w-10 h-10 border rounded-full">+</button>
            </div>
            <div class="grid grid-cols-4 gap-2 mb-4">
                <button onclick="setQtyPercent(0.1)" class="bg-gray-100 py-2 rounded text-xs">10%</button>
                <button onclick="setQtyPercent(0.5)" class="bg-gray-100 py-2 rounded text-xs">50%</button>
                <button onclick="setQtyPercent(1)" class="bg-indigo-100 text-indigo-600 py-2 rounded text-xs">MAX</button>
            </div>
            <div class="flex gap-2">
                <button onclick="closeModal()" class="flex-1 py-3 border rounded-xl">ì·¨ì†Œ</button>
                <button id="btn-trade-confirm" class="flex-1 py-3 bg-indigo-600 text-white rounded-xl font-bold">ì£¼ë¬¸</button>
            </div>
        </div>
    </div>

    <div id="house-modal" class="fixed inset-0 modal-backdrop hidden z-[90] flex items-center justify-center p-4">
        <div class="bg-white w-full max-w-sm rounded-2xl p-6 text-center shadow-2xl">
            <div id="house-emoji" class="text-6xl mb-4"></div>
            <h2 id="house-title" class="text-2xl font-bold mb-2"></h2>
            <p id="house-desc" class="text-gray-500 text-sm mb-6"></p>
            <button onclick="document.getElementById('house-modal').classList.add('hidden')" class="w-full py-3 bg-gray-800 text-white rounded-xl">ë‹«ê¸°</button>
        </div>
    </div>

    <div id="walk-modal" class="fixed inset-0 modal-backdrop hidden z-[90] flex items-center justify-center p-4">
        <div class="bg-white w-full max-w-sm rounded-2xl p-6 text-center shadow-2xl">
            <div class="text-6xl mb-4 animate-bounce">ğŸš¶</div>
            <h3 class="text-xl font-bold mb-2">ì‚°ì±… ì¤‘...</h3>
            <p class="text-gray-500 text-sm mb-4">ëˆ„êµ°ê°€ ë‹¹ì‹ ì„ ì³ë‹¤ë´…ë‹ˆë‹¤.</p>
            <div id="walk-result-area" class="hidden">
                 <div id="walk-result-emoji" class="text-6xl mb-2"></div>
                 <div id="walk-result-text" class="font-bold mb-4"></div>
            </div>
            <button id="btn-try-hunting" onclick="tryGetNumber()" class="w-full py-3 bg-pink-500 text-white rounded-xl font-bold mb-2">ë§ ê±¸ì–´ë³´ê¸°</button>
            <button onclick="closeWalkModal()" class="w-full py-3 border rounded-xl">ë‚˜ê°€ê¸°</button>
        </div>
    </div>

    <div id="interaction-modal" class="fixed inset-0 modal-backdrop hidden z-[95] flex items-center justify-center p-4">
        <div class="bg-white w-full max-w-sm rounded-2xl shadow-2xl overflow-hidden">
            <div class="bg-pink-50 p-4 flex justify-between items-center">
                <h3 id="interact-title" class="font-bold text-pink-700"></h3>
                <button onclick="closeInteractModal()" class="text-gray-400">&times;</button>
            </div>
            <div class="p-6 text-center">
                <div id="interact-emoji" class="text-6xl mb-4"></div>
                <div id="ai-talk-response" class="hidden mb-4 bg-white border-2 border-purple-100 p-3 rounded-xl text-sm text-gray-700 font-medium shadow-sm"></div>
                <div class="flex justify-center items-center gap-2 mb-4">
                    <div class="text-xs font-bold text-gray-500">Love</div>
                    <div class="w-32 h-2 bg-gray-200 rounded-full overflow-hidden">
                        <div id="interact-love-bar" class="h-full bg-pink-500 transition-all" style="width: 0%"></div>
                    </div>
                    <div id="interact-love-val" class="text-xs font-bold text-pink-600">0%</div>
                </div>
                <div class="grid grid-cols-1 gap-2" id="interact-buttons"></div>
            </div>
        </div>
    </div>

    <div id="oddeven-double-modal" class="fixed inset-0 modal-backdrop hidden z-[99] flex items-center justify-center p-4">
        <div class="bg-slate-900 w-full max-w-sm rounded-3xl p-6 text-center shadow-2xl border-2 border-yellow-500 relative overflow-hidden">
            <div class="absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-yellow-500/20 via-slate-900 to-slate-900 pointer-events-none"></div>
            <div class="relative z-10">
                <div class="text-5xl mb-2">ğŸš€</div>
                <h2 class="text-2xl font-black text-white italic mb-1">DOUBLE UP!</h2>
                <p class="text-yellow-400 font-bold text-lg mb-6" id="double-up-msg">í˜„ì¬ ë‹¹ì²¨ê¸ˆ: 0ì›</p>
                <div class="bg-slate-800 rounded-xl p-4 mb-6 border border-slate-700">
                    <div class="text-gray-400 text-xs mb-1">ë‹¤ìŒ ë„ì „ ì„±ê³µ ì‹œ</div>
                    <div class="text-3xl font-black text-white" id="double-up-next-amount">0ì›</div>
                    <div class="text-sm text-yellow-500 font-bold mt-1" id="double-up-rate-badge">5ë°° ë„ì „!</div>
                </div>
                <div class="grid grid-cols-1 gap-3">
                    <button onclick="continueDoubleUp()" class="w-full py-4 bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-500 hover:to-orange-500 text-white font-black rounded-xl shadow-lg shadow-red-900/50 active:scale-95 transition text-xl flex items-center justify-center gap-2 group">
                        <span>ğŸ”¥ ë„ì „í•˜ê¸°</span>
                        <span class="text-sm font-normal opacity-70 group-hover:animate-pulse">(í™•ë¥  50%)</span>
                    </button>
                    <button onclick="stopDoubleUp()" class="w-full py-3 bg-slate-700 hover:bg-slate-600 text-gray-300 font-bold rounded-xl shadow-lg active:scale-95 transition">
                        ğŸ’° ì—¬ê¸°ì„œ ë©ˆì¶”ê³  ë°›ê¸°
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div id="gift-select-modal" class="fixed inset-0 modal-backdrop hidden z-[98] flex items-center justify-center p-4">
        <div class="bg-white w-full max-w-sm rounded-2xl shadow-2xl overflow-hidden">
            <div class="p-4 border-b flex justify-between">
                <h3 class="font-bold text-gray-800">ì„ ë¬¼í•¨</h3>
                <button onclick="closeGiftSelectModal()" class="text-gray-400">&times;</button>
            </div>
            <div class="p-4 h-64 overflow-y-auto" id="gift-item-list"></div>
        </div>
    </div>

    <!-- ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸° ëª¨ë‹¬ (V11 Safe Mode) -->
    <div id="load-game-modal" class="fixed inset-0 modal-backdrop hidden z-[110] flex items-center justify-center p-4">
        <div class="bg-white w-full max-w-sm rounded-2xl shadow-2xl p-5">
            <div class="flex justify-between items-center mb-4">
                <h3 class="font-bold text-lg text-green-600 flex items-center gap-2">ğŸ’µ í˜„ê¸ˆ ë°ì´í„° ë³µêµ¬</h3>
                <button onclick="closeLoadGameModal()" class="text-gray-400 text-xl">&times;</button>
            </div>
            <p class="text-xs text-gray-500 mb-3">
                ë³µì‚¬í•´ë‘” ì½”ë“œë¥¼ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”.<br>
                <span class="text-green-600 font-bold">ì•ˆì „ ëª¨ë“œ: ì €ì¥ëœ 'í˜„ê¸ˆ'ë§Œ í˜„ì¬ ìƒíƒœì— ë®ì–´ì”ë‹ˆë‹¤.</span>
            </p>
            <textarea id="load-code-input" class="w-full h-32 p-3 bg-gray-100 rounded-xl border border-gray-300 text-xs font-mono mb-4 focus:border-indigo-500 outline-none resize-none allow-select" placeholder="ì—¬ê¸°ì— ì €ì¥ ì½”ë“œë¥¼ ë¶™ì—¬ë„£ê¸°..."></textarea>
            <div class="flex gap-2">
                <button onclick="closeLoadGameModal()" class="flex-1 py-3 border rounded-xl font-bold text-gray-500">ì·¨ì†Œ</button>
                <button onclick="importSaveData()" class="flex-1 py-3 bg-green-600 text-white rounded-xl font-bold shadow-lg active:scale-95 transition">í˜„ê¸ˆ ë³µêµ¬ ì‹¤í–‰</button>
            </div>
        </div>
    </div>
    
    <!-- ì €ì¥ ì½”ë“œ í™•ì¸ ëª¨ë‹¬ (ë³µì‚¬ ì‹¤íŒ¨ ì‹œ ìˆ˜ë™ ë³µì‚¬ìš©) -->
    <div id="manual-save-modal" class="fixed inset-0 modal-backdrop hidden z-[110] flex items-center justify-center p-4">
        <div class="bg-white w-full max-w-sm rounded-2xl shadow-2xl p-5">
            <h3 class="font-bold text-lg mb-2">ì €ì¥ ì½”ë“œ ìƒì„± ì™„ë£Œ</h3>
            <p class="text-xs text-gray-500 mb-3">ì•„ë˜ ì½”ë“œë¥¼ ì „ì²´ ì„ íƒ í›„ ë³µì‚¬í•˜ì—¬<br>ì¹´ì¹´ì˜¤í†¡ ë‚˜ì—ê²Œ ë³´ë‚´ê¸°ë‚˜ ë©”ëª¨ì¥ì— ì €ì¥í•˜ì„¸ìš”.</p>
            <textarea id="manual-save-code" class="w-full h-32 p-3 bg-gray-100 rounded-xl border border-gray-300 text-xs font-mono mb-4 focus:border-indigo-500 outline-none resize-none allow-select" readonly></textarea>
            <button onclick="document.getElementById('manual-save-modal').classList.add('hidden')" class="w-full py-3 bg-indigo-600 text-white rounded-xl font-bold">ë‹«ê¸°</button>
        </div>
    </div>

    <div id="toast-container" class="fixed bottom-24 left-0 right-0 flex flex-col items-center z-[80] pointer-events-none space-y-2"></div>
<script src="js/ALL/mock_api.js"></script>
<script src="js/ALL/config_state.js"></script>
<script src="js/ALL/utils_save.js"></script>
<script src="js/ALL/game_logic.js"></script>
<script src="js/ALL/ui_render_tabs.js"></script>
<script src="js/MyTap/man.js"></script>
<script src="js/stock/stock.js"></script>
<script src="js/coin/exchange.js"></script>
<script src="js/house/real_estate.js"></script>
<script src="js/casino/casino.js"></script>
<script src="js/casino/Blackjack.js"></script>
<script src="js/app/boot.js"></script>


</body>
</html>
